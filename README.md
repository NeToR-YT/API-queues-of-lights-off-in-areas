# API –ì—Ä–∞—Ñ—ñ–∫—ñ–≤ –ü–æ–≥–æ–¥–∏–Ω–Ω–∏—Ö –í—ñ–¥–∫–ª—é—á–µ–Ω—å (–ì–ü–í)

–°–∏—Å—Ç–µ–º–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –∑–±–æ—Ä—É —Ç–∞ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –≥—Ä–∞—Ñ—ñ–∫—ñ–≤ –≤—ñ–¥–∫–ª—é—á–µ–Ω—å –µ–ª–µ–∫—Ç—Ä–æ–µ–Ω–µ—Ä–≥—ñ—ó –∑ Telegram –∫–∞–Ω–∞–ª—ñ–≤ —É–∫—Ä–∞—ó–Ω—Å—å–∫–∏—Ö –æ–±–ª–∞—Å–Ω–∏—Ö –µ–Ω–µ—Ä–≥–æ–∫–æ–º–ø–∞–Ω—ñ–π.

## –ö–æ—Ä–æ—Ç–∫–æ

- **–°–µ—Ä–≤–µ—Ä**: Flask REST API + APScheduler
- **–ü–∞—Ä—Å–∏–Ω–≥**: Telethon –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –∑–±–æ—Ä—É –¥–∞–Ω–∏—Ö –∑ Telegram
- **–î–∞–Ω—ñ**: JSON —Ñ–∞–π–ª–∏ –¥–ª—è —Å—å–æ–≥–æ–¥–Ω—ñ, –∑–∞–≤—Ç—Ä–∞ —Ç–∞ —ñ—Å—Ç–æ—Ä—ñ—ó (per-channel)
- **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—è**: 
  - –ó–∞–ø—É—Å–∫ –ø–∞—Ä—Å–µ—Ä–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç—ñ API
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–æ–∂–Ω—ñ 15 —Ö–≤–∏–ª–∏–Ω
  - –†—É—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —á–µ—Ä–µ–∑ API endpoint
- **–ë–∞—Ç—á-–ø–∞—Ä—Å–∏–Ω–≥**: –û–±—Ä–æ–±–ª—è—î –∫–∞–Ω–∞–ª–∏ –ø–∞—á–∫–∞–º–∏ –∑ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–º–∏ –ø–µ—Ä–µ—Ä–≤–∞–º–∏
- **–Ü–Ω—Ç–µ–ª–µ–∫—Ç—É–∞–ª—å–Ω–∏–π –ø–æ—à—É–∫**: –®—É–∫–∞—î —Å—å–æ–≥–æ–¥–Ω—ñ + –∑–∞–≤—Ç—Ä–∞ –æ–¥–Ω–æ—á–∞—Å–Ω–æ, –∑ fallback –Ω–∞ –Ω–∞–π—Å–≤—ñ–∂—ñ—à—ñ –¥–∞–Ω—ñ

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
‚îú‚îÄ‚îÄ backend/
‚îÇ   ‚îú‚îÄ‚îÄ app.py                      # Flask API —Å–µ—Ä–≤–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ fetcher.py                  # Telegram parser –∑ batch-–æ–±—Ä–æ–±–∫–æ—é  
‚îÇ   ‚îú‚îÄ‚îÄ config.json                 # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è (—Å—Ç–≤–æ—Ä–∏—Ç–∏ –∑ config.example.json)
‚îÇ   ‚îú‚îÄ‚îÄ config.example.json         # –ü—Ä–∏–∫–ª–∞–¥ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
‚îÇ   ‚îú‚îÄ‚îÄ cities.json                 # –°–ø–∏—Å–æ–∫ –º—ñ—Å—Ç –∑ ID
‚îÇ   ‚îú‚îÄ‚îÄ schedule_today.json         # –ì—Ä–∞—Ñ—ñ–∫–∏ –Ω–∞ —Å—å–æ–≥–æ–¥–Ω—ñ (–º–∞—Å–∏–≤)
‚îÇ   ‚îú‚îÄ‚îÄ schedule_tomorrow.json       # –ì—Ä–∞—Ñ—ñ–∫–∏ –Ω–∞ –∑–∞–≤—Ç—Ä–∞ (–º–∞—Å–∏–≤)
‚îÇ   ‚îú‚îÄ‚îÄ schedule_history_1.json      # –Ü—Å—Ç–æ—Ä—ñ—è –¥–ª—è –∫–∞–Ω–∞–ª—É 1
‚îÇ   ‚îú‚îÄ‚îÄ schedule_history_2.json      # –Ü—Å—Ç–æ—Ä—ñ—è –¥–ª—è –∫–∞–Ω–∞–ª—É 2
‚îÇ   ‚îú‚îÄ‚îÄ schedule_history_3.json      # –Ü—Å—Ç–æ—Ä—ñ—è –¥–ª—è –∫–∞–Ω–∞–ª—É 3
‚îÇ   ‚îú‚îÄ‚îÄ schedule_history_4.json      # –Ü—Å—Ç–æ—Ä—ñ—è –¥–ª—è –∫–∞–Ω–∞–ª—É 4
‚îÇ   ‚îú‚îÄ‚îÄ templates/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.html              # –¢–µ—Å—Ç–æ–≤–∏–π —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
‚îÇ   ‚îî‚îÄ‚îÄ session_name.session         # –°–µ—Å—ñ—è Telethon (—Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ)
‚îú‚îÄ‚îÄ requirements.txt                 # Python –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
‚îî‚îÄ‚îÄ README.md                        # –¶–µ–π —Ñ–∞–π–ª
```

## –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

### 1. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ (Windows)

```powershell
python -m venv .venv

.\.venv\Scripts\Activate.ps1

pip install -r requirements.txt
```

### 2. –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è Telegram

–°—Ç–≤–æ—Ä—ñ—Ç—å `backend/config.json` –Ω–∞ –æ—Å–Ω–æ–≤—ñ `backend/config.example.json`:

```json
{
  "api_id": "–≤–∞—à_api_id",
  "api_hash": "–≤–∞—à_api_hash",
  "session_path": "session_name",
  "channels": [
    {
      "id": 1,
      "name": "–ß–µ—Ä–∫–∞—Å–∏",
      "username": "pat_cherkasyoblenergo"
    },
    {
      "id": 2,
      "name": "–ó–∞–ø–æ—Ä—ñ–∂–∂—è",
      "username": "Zaporizhzhyaoblenergo_news"
    },
    {
      "id": 3,
      "name": "–ú–∏–∫–æ–ª–∞—ó–≤",
      "username": "mk_energy_ua"
    },
    {
      "id": 4,
      "name": "–•–∞—Ä–∫—ñ–≤",
      "username": "kharkivenergy"
    }
  ],
  "batch_parser": {
    "batch_size": 2,
    "batch_delay": 5,
    "limit_messages": 50
  },
  "timezone_offset": 2
}
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä–∏:**
- `api_id`, `api_hash` - –≤–∞—à—ñ Telegram API credentials
- `channels` - —Å–ø–∏—Å–æ–∫ –∫–∞–Ω–∞–ª—ñ–≤ –¥–ª—è –ø–∞—Ä—Å—É–≤–∞–Ω–Ω—è
- `batch_size` - –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∫–∞–Ω–∞–ª—ñ–≤ –≤ –æ–¥–Ω—ñ–π –ø–∞—á—Ü—ñ
- `batch_delay` - –ø–∞—É–∑–∞ –º—ñ–∂ –ø–∞—á–∫–∞–º–∏ (–≤ —Å–µ–∫—É–Ω–¥–∞—Ö)
- `limit_messages` - –º–∞–∫—Å. –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏
- `timezone_offset` - —á–∞—Å–æ–≤–∏–π –ø–æ—è—Å (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: 2 –¥–ª—è UTC+2 –£–∫—Ä–∞—ó–Ω–∞)

**–î–µ –æ—Ç—Ä–∏–º–∞—Ç–∏ `api_id` —Ç–∞ `api_hash`:**
1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ https://my.telegram.org/
2. –£–≤—ñ–π–¥—ñ—Ç—å –≤–∞—à–∏–º –Ω–æ–º–µ—Ä–æ–º —Ç–µ–ª–µ—Ñ–æ–Ω—É
3. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ "API development tools"
4. –°–∫–æ–ø—ñ—é–π—Ç–µ `api_id` —Ç–∞ `api_hash`

### 3. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```powershell
python backend\app.py
```

–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è –Ω–∞ `http://127.0.0.1:5000`

## API –ú–∞—Ä—à—Ä—É—Ç–∏

### `GET /api/status`
–ü–æ–≤–µ—Ä—Ç–∞—î —Å—Ç–∞—Ç—É—Å –æ—Å—Ç–∞–Ω–Ω—å–æ–≥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö –ø–∞—Ä—Å–µ—Ä–æ–º.

**–í—ñ–¥–ø–æ–≤—ñ–¥—å:**
```json
{
  "last_update": {
    "timestamp": "2026-02-12T14:30:45.123456",
    "status": "success",
    "message": "–î–∞–Ω—ñ –æ–Ω–æ–≤–ª–µ–Ω–æ —É—Å–ø—ñ—à–Ω–æ!"
  },
  "parsing_in_progress": false,
  "auto_update_interval_minutes": 15
}
```

### `POST /api/update`
–ó–∞–ø—É—Å–∫ —Ä—É—á–Ω–æ–≥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö –ø–∞—Ä—Å–µ—Ä–æ–º.

**–ó–∞–ø–∏—Ç:**
```bash
curl -X POST http://localhost:5000/api/update
```

**–í—ñ–¥–ø–æ–≤—ñ–¥—å (–∑–∞–ø—É—â–µ–Ω–æ):**
```json
{
  "status": "started",
  "message": "–û–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ø—É—â–µ–Ω–æ",
  "last_update": {...}
}
```

### `GET /api/cities`
–ü–æ–≤–µ—Ä—Ç–∞—î —Å–ø–∏—Å–æ–∫ –≤—Å—ñ—Ö –º—ñ—Å—Ç.

**–í—ñ–¥–ø–æ–≤—ñ–¥—å:**
```json
{
  "cities": [
    {"id": 1, "name": "–ß–µ—Ä–∫–∞—Å–∏"},
    {"id": 2, "name": "–ó–∞–ø–æ—Ä—ñ–∂–∂—è"}
  ]
}
```

### `GET /api/schedules/today`
–û—Ç—Ä–∏–º–∞—Ç–∏ –≥—Ä–∞—Ñ—ñ–∫ –Ω–∞ —Å—å–æ–≥–æ–¥–Ω—ñ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –º—ñ—Å—Ç–∞.

**–ü–∞—Ä–∞–º–µ—Ç—Ä–∏:**
- `channel_id` (–æ–±–æ–≤'—è–∑–∫–æ–≤–∏–π): ID –º—ñ—Å—Ç–∞/–∫–∞–Ω–∞–ª—É
- `queue` (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–∏–π): –ù–æ–º–µ—Ä —á–µ—Ä–≥–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥ "1.1", "2.2")

**–ü—Ä–∏–∫–ª–∞–¥:**
```
GET /api/schedules/today?channel_id=1&queue=1.1
```

**–í—ñ–¥–ø–æ–≤—ñ–¥—å:**
```json
{
  "channel_id": 1,
  "city_name": "–ß–µ—Ä–∫–∞—Å–∏",
  "date": "2026-02-11",
  "time": "20:57:33",
  "schedule": {
    "1.1": ["01:00-04:30", "06:30-10:30", "13:00-16:30", "18:30-22:30"]
  },
  "emergency_outages": false
}
```

### `GET /api/schedules/tomorrow`
–û—Ç—Ä–∏–º–∞—Ç–∏ –≥—Ä–∞—Ñ—ñ–∫ –Ω–∞ –∑–∞–≤—Ç—Ä–∞ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –º—ñ—Å—Ç–∞.

**–ü–∞—Ä–∞–º–µ—Ç—Ä–∏:**
- `channel_id` (–æ–±–æ–≤'—è–∑–∫–æ–≤–∏–π): ID –º—ñ—Å—Ç–∞/–∫–∞–Ω–∞–ª—É
- `queue` (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–∏–π): –ù–æ–º–µ—Ä —á–µ—Ä–≥–∏

**–ü—Ä–∏–∫–ª–∞–¥:**
```
GET /api/schedules/tomorrow?channel_id=1
```

### `GET /api/schedules`
–û—Ç—Ä–∏–º–∞—Ç–∏ –≥—Ä–∞—Ñ—ñ–∫ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É –¥–∞—Ç—É –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –º—ñ—Å—Ç–∞.

**–ü–∞—Ä–∞–º–µ—Ç—Ä–∏:**
- `channel_id` (–æ–±–æ–≤'—è–∑–∫–æ–≤–∏–π): ID –º—ñ—Å—Ç–∞/–∫–∞–Ω–∞–ª—É
- `date` (–æ–±–æ–≤'—è–∑–∫–æ–≤–∏–π): –î–∞—Ç–∞ —É —Ñ–æ—Ä–º–∞—Ç—ñ YYYY-MM-DD
- `queue` (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–∏–π): –ù–æ–º–µ—Ä —á–µ—Ä–≥–∏

**–ü—Ä–∏–∫–ª–∞–¥:**
```
GET /api/schedules?channel_id=1&date=2026-02-11&queue=1.1
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–∏—Ö

### schedule_today.json / schedule_tomorrow.json

–ú–∞—Å–∏–≤ –æ–±'—î–∫—Ç—ñ–≤, –ø–æ –æ–¥–Ω–æ–º—É –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –∫–∞–Ω–∞–ª—É:

```json
[
  {
    "channel_id": 1,
    "schedule_time": "20:57:33",
    "schedule": {
      "1.1": ["01:00-04:30", "06:30-10:30"],
      "1.2": ["02:00-05:30", "07:30-11:30"],
      "2.1": ["00:00-01:00", "03:30-07:00"]
    },
    "emergency_outages": false
  }
]
```

### schedule_history_X.json

–û–∫—Ä–µ–º–∏–π —Ñ–∞–π–ª –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –∫–∞–Ω–∞–ª—É –∑ –π–æ–≥–æ —ñ—Å—Ç–æ—Ä—ñ—î—é (–º–∞—Å—Å–∏–≤):

```json
[
    {
        "channel_id": 1,
        "schedule_date": "2026-02-09",
        "schedule_time": "22:30:19",
        "schedule": {
        "1.1": ["00:00-04:00", "06:00-10:30"],
        "1.2": ["01:00-05:30", "07:00-11:00"]
        },
        "emergency_outages": true  
    },
    {
        "schedule_date": "2026-02-08",
        "schedule_time": "21:00:00",
        "schedule": {...},
        "emergency_outages": false
    }
]
```

## Batch-–ø–∞—Ä—Å–∏–Ω–≥ —Ç–∞ –ü–æ—à—É–∫ –ì—Ä–∞—Ñ—ñ–∫—ñ–≤

### –Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î

–ü–∞—Ä—Å–µ—Ä –æ–±—Ä–æ–±–ª—è—î Telegram –∫–∞–Ω–∞–ª–∏ –ø–∞—á–∫–∞–º–∏ –¥–ª—è –∑–∞–ø–æ–±—ñ–≥–∞–Ω–Ω—è –±–ª–æ–∫—É–≤–∞–Ω–Ω—è IP:

1. –î—ñ–ª–∏—Ç—å –∫–∞–Ω–∞–ª–∏ –Ω–∞ –ø–∞—á–∫–∏ –∑–∞ `batch_size`
2. –ö–æ–∂–Ω—É –ø–∞—á–∫—É –æ–±—Ä–æ–±–ª—è—î –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ
3. –ß–µ–∫–∞—î `batch_delay` —Å–µ–∫—É–Ω–¥ –ø–µ—Ä–µ–¥ –Ω–∞—Å—Ç—É–ø–Ω–æ—é –ø–∞—á–∫–æ—é

### –ü–æ—à—É–∫ –ì—Ä–∞—Ñ—ñ–∫—ñ–≤

–î–ª—è –∫–æ–∂–Ω–æ–≥–æ –∫–∞–Ω–∞–ª—É –ø–∞—Ä—Å–µ—Ä:
- –ü–µ—Ä–µ–≥–ª—è–¥–∞—î –æ—Å—Ç–∞–Ω–Ω—ñ `limit_messages` –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
- –®—É–∫–∞—î –≥—Ä–∞—Ñ—ñ–∫–∏ **–Ω–∞ —Å—å–æ–≥–æ–¥–Ω—ñ** —Ç–∞ **–Ω–∞ –∑–∞–≤—Ç—Ä–∞** –æ–¥–Ω–æ—á–∞—Å–Ω–æ
- –Ø–∫—â–æ –Ω–µ –∑–Ω–∞–π–¥–µ - –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –Ω–∞–π—Å–≤—ñ–∂—ñ—à–∏–π –¥–æ—Å—Ç—É–ø–Ω–∏–π –≥—Ä–∞—Ñ—ñ–∫ —è–∫ fallback

### –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

–¶–µ –Ω–∞–ª–∞—à—Ç–æ–≤—É—î—Ç—å—Å—è –≤ `config.json`:
```json
"batch_parser": {
  "batch_size": 2,
  "batch_delay": 5,
  "limit_messages": 50
}
```

–ü—Ä–∏–∫–ª–∞–¥: –Ø–∫—â–æ —É –≤–∞—Å 4 –∫–∞–Ω–∞–ª–∏, batch_size=2, batch_delay=10:
1. –û–±—Ä–æ–±–∏—Ç–∏ –∫–∞–Ω–∞–ª–∏ 1-2 (–ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ, —à—É–∫–∞—é—Ç—å —Å—å–æ–≥–æ–¥–Ω—ñ + –∑–∞–≤—Ç—Ä–∞)
2. –ß–µ–∫–∞—Ç–∏ 10 —Å–µ–∫—É–Ω–¥
3. –û–±—Ä–æ–±–∏—Ç–∏ –∫–∞–Ω–∞–ª–∏ 3-4 (–ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ, —à—É–∫–∞—é—Ç—å —Å—å–æ–≥–æ–¥–Ω—ñ + –∑–∞–≤—Ç—Ä–∞)

## –§–æ—Ä–º–∞—Ç–∏ –ø–∞—Ä—Å–∏–Ω–≥—É

–ü–∞—Ä—Å–µ—Ä –ø—ñ–¥—Ç—Ä–∏–º—É—î —Ä—ñ–∑–Ω—ñ —Ñ–æ—Ä–º–∞—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –ì–ü–í:

**–§–æ—Ä–º–∞—Ç 1** (–ó–∞–ø–æ—Ä—ñ–∂–∂—è):
```
1.1: 03:00 - 08:00, 12:00 - 17:00, 21:00 - 24:00
1.2: 03:00 - 08:00, 12:00 - 17:00, 21:00 - 24:00
```

**–§–æ—Ä–º–∞—Ç 2** (–∑ emoji):
```
üîπ1.1: 00:00 ‚Äì 05:00, 09:00 ‚Äì 14:00, 18:00 ‚Äì 23:00
üîπ1.2: 00:00 ‚Äì 05:00, 09:00 ‚Äì 14:00, 18:00 ‚Äì 23:00
```

**–§–æ—Ä–º–∞—Ç 3** (–º–µ–∂—ñ —á–∞—Å—É –∑ –∫—Ä–∞–ø–∫–æ—é):
```
1.1 ‚Äì 00:00 - 01:30; 05:00 - 08:30; 12:00 - 15:30; 19:00 - 00:00
1.2 ‚Äì 01:30 - 08:30; 12:00 - 15:30; 19:00 - 22:30
```

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è

- –ü—Ä–∏ –∑–∞–ø—É—Å–∫—É API –æ–¥—Ä–∞–∑—É –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è **–ø–µ—Ä—à–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è** –ø–∞—Ä—Å–µ—Ä–∞
- –ü—ñ—Å–ª—è —Ü—å–æ–≥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ø—É—Å–∫–∞—é—Ç—å—Å—è **–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∫–æ–∂–Ω—ñ 15 —Ö–≤–∏–ª–∏–Ω**
- –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–æ–∂–µ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ **—Ä—É—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è** —á–µ—Ä–µ–∑ `POST /api/update`
- –°—Ç–∞—Ç—É—Å –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –º–æ–∂–Ω–∞ –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ —á–µ—Ä–µ–∑ `GET /api/status`

–©–æ–± –∑–º—ñ–Ω–∏—Ç–∏ —ñ–Ω—Ç–µ—Ä–≤–∞–ª –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è, –∑–º—ñ–Ω—ñ—Ç—å –≤ `app.py`:

```python
scheduler.add_job(func=update_data_task, trigger="interval", minutes=15)
```

## –†–æ–∑—Ä–æ–±–∫–∞

### –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è API

–°–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ—Å—å –∑–∞–ø–∏—Ç–∞–º–∏ (curl, Postman, —Ç–æ—â–æ):

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∞—Ç—É—Å –æ—Å—Ç–∞–Ω–Ω—å–æ–≥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
curl http://localhost:5000/api/status

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Ä—É—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
curl -X POST http://localhost:5000/api/update

# –û—Ç—Ä–∏–º–∞—Ç–∏ –º—ñ—Å—Ç–∞
curl http://localhost:5000/api/cities

# –û—Ç—Ä–∏–º–∞—Ç–∏ –≥—Ä–∞—Ñ—ñ–∫ –Ω–∞ —Å—å–æ–≥–æ–¥–Ω—ñ
curl "http://localhost:5000/api/schedules/today?channel_id=1"

# –û—Ç—Ä–∏–º–∞—Ç–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É —á–µ—Ä–≥—É
curl "http://localhost:5000/api/schedules/today?channel_id=1&queue=1.1"
```

### –†—É—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö (–∫–æ–º–∞–Ω–¥–Ω–∏–π —Ä—è–¥–æ–∫)

```powershell
python backend\fetcher.py
```

## –†–æ–∑–≤'—è–∑–∞–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º

### –ü–æ–º–∏–ª–∫–∞: "No config.json found"
- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å, —â–æ `backend/config.json` —ñ—Å–Ω—É—î
- –°–∫–æ–ø—ñ—é–π—Ç–µ `backend/config.example.json` —Ç–∞ –∑–∞–ø–æ–≤–Ω—ñ—Ç—å –ø–æ—Ç—Ä—ñ–±–Ω—ñ –ø–æ–ª—è

### –ü–æ–º–∏–ª–∫–∞ "Missing required config values"
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ –≤ `config.json` —î `api_id`, `api_hash` —Ç–∞ `channels`

### –ù–µ–º–∞—î –¥–∞–Ω–∏—Ö –≤ schedule_today.json
- –ó–∞–ø—É—Å—Ç—ñ—Ç—å API —á–µ—Ä–µ–∑ Flask - –≤—ñ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø–µ—Ä—à–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
- –ê–±–æ –∑–∞–ø—É—Å—Ç—ñ—Ç—å `python backend\fetcher.py` –≤—Ä—É—á–Ω—É
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç –∑'—î–¥–Ω–∞–Ω–Ω—è
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –¥–æ—Å—Ç—É–ø –¥–æ Telegram –∫–∞–Ω–∞–ª—ñ–≤
- –í–∏–∫–æ–Ω–∞–π—Ç–µ `POST /api/update` —á–µ—Ä–µ–∑ API

### `schedule_tomorrow.json` –ø—É—Å—Ç–∏–π
- –¶–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ - –∫–∞–Ω–∞–ª–∏ —â–µ –Ω–µ –æ–ø—É–±–ª—ñ–∫—É–≤–∞–ª–∏ –≥—Ä–∞—Ñ—ñ–∫–∏ –Ω–∞ –∑–∞–≤—Ç—Ä–∞
- –î–∞–Ω—ñ –∑'—è–≤–ª—è—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —è–∫ —Ç—ñ–ª—å–∫–∏ –±—É–¥—É—Ç—å –æ–ø—É–±–ª—ñ–∫–æ–≤–∞–Ω—ñ
- –°—Ç–∞—Ç—É—Å –º–æ–∂–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —á–µ—Ä–µ–∑ `GET /api/status`

### –ë–ª–æ–∫—É–≤–∞–Ω–Ω—è IP –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥—É
- –ó–±—ñ–ª—å—à—Ç–µ `batch_delay` –≤ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
- –ó–º–µ–Ω—à—Ç–µ `batch_size`
- –ó–º–µ–Ω—à—Ç–µ `limit_messages` –¥–ª—è —à–≤–∏–¥—à–æ–≥–æ –ø–∞—Ä—Å—É–≤–∞–Ω–Ω—è

## –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ

–î–∏–≤. [requirements.txt](requirements.txt):
- **Flask** - –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è REST API
- **APScheduler** - scheduler –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏—Ö —Ñ–æ–Ω–æ–≤–∏—Ö –∑–∞–≤–¥–∞–Ω—å
- **Telethon** - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏–π Telegram API –∫–ª—ñ—î–Ω—Ç –¥–ª—è –ø–∞—Ä—Å—É–≤–∞–Ω–Ω—è



## –ö–æ–Ω—Ç–∞–∫—Ç

–ü–æ–∫–∏—â–æ –Ω–µ–º–∞—î :)
